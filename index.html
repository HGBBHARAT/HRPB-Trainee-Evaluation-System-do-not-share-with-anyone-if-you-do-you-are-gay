<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRBR | Cyber Command</title>
    <script>
        /* --- CONFIGURATION START --- */
        const CONFIG = {
            WEBHOOK_URL: "YOUR_WEBHOOK_URL_HERE", // Replace with your Discord Webhook URL
            ANNOUNCE_ROLE_ID: "YOUR_ROLE_ID_HERE", // Replace with the Role ID you want to ping
            ACCESS_KEY: "HRMC-X9-7721-OMEGA"
        };
        /* --- CONFIGURATION END --- */
    </script>
    <style>
        :root {
            --bg-deep: #02050f;      /* Deep Dark Blue */
            --bg-panel: #0a132d;     /* Lighter Blue */
            --neon-pink: #ff00ff;    /* Neon Pink */
            --neon-blue: #00f2ff;    /* Neon Blue */
            --gold: #d4af37;         /* Cyber Gold */
            --text: #e0e0e0;
        }

        body {
            font-family: 'Segoe UI', 'Courier New', monospace;
            background-color: var(--bg-deep);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Login Screen Styles */
        #login-screen {
            background: var(--bg-panel);
            padding: 40px;
            border: 2px solid var(--neon-pink);
            box-shadow: 0 0 20px var(--neon-pink);
            text-align: center;
            border-radius: 5px;
        }

        .login-input {
            background: #000;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 12px;
            width: 250px;
            text-align: center;
            font-size: 1.1rem;
            letter-spacing: 3px;
            margin-bottom: 20px;
        }

        /* Dashboard Styles */
        #dashboard {
            display: none;
            width: 95%;
            max-width: 1000px;
            background: var(--bg-panel);
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.15);
            border-radius: 5px;
        }

        .tabs { display: flex; border-bottom: 2px solid var(--neon-pink); }
        .tab {
            flex: 1; padding: 20px; text-align: center; cursor: pointer;
            color: var(--gold); font-weight: bold; text-transform: uppercase;
        }
        .tab.active { background: rgba(255, 0, 255, 0.15); text-shadow: 0 0 8px var(--neon-pink); }

        .content { padding: 30px; display: none; }
        .content.active { display: block; }

        input, textarea, select {
            background: #02050f; border: 1px solid var(--neon-blue);
            color: white; padding: 10px; width: 100%; box-sizing: border-box; margin-top: 8px;
        }

        /* Custom Toggle Switch (YES/NO) */
        .toggle-group { display: flex; gap: 5px; margin: 10px 0; }
        .t-btn {
            padding: 8px 20px; cursor: pointer; border: 1px solid var(--neon-pink);
            background: transparent; color: white; flex: 1; text-align: center;
        }
        .t-btn.yes-active { background: #00ff00; color: #000; border-color: #00ff00; font-weight: bold; }
        .t-btn.no-active { background: #ff0000; color: #fff; border-color: #ff0000; font-weight: bold; }

        .trainee-entry { border: 1px solid rgba(255, 0, 255, 0.3); padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        
        #publish-btn {
            background: var(--bg-deep); color: var(--neon-blue);
            border: 2px solid var(--neon-blue); width: 100%; padding: 20px;
            font-size: 1.4rem; cursor: pointer; font-weight: bold; margin-top: 10px;
        }
        #publish-btn:hover { background: var(--neon-blue); color: black; box-shadow: 0 0 20px var(--neon-blue); }

        .summary-card { background: rgba(0, 242, 255, 0.05); border: 1px solid var(--neon-blue); padding: 10px; margin: 5px 0; }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color: var(--gold); margin-bottom: 5px;">HIGH ROCK BORDER ROLEPLAY</h1>
        <p style="color: var(--neon-blue); margin-bottom: 25px;">ENCRYPTED ACCESS REQUIRED</p>
        <input type="password" id="pass-field" class="login-input" placeholder="••••••••">
        <br>
        <button onclick="unlockTerminal()" style="background: var(--neon-pink); color: white; padding: 12px 40px; border: none; font-weight: bold; cursor: pointer;">DECRYPT</button>
    </div>

    <div id="dashboard">
        <div class="tabs">
            <div class="tab active" id="tab-ann" onclick="switchTab('ann')">Announcements</div>
            <div class="tab" id="tab-res" onclick="switchTab('res')">Training Results</div>
        </div>

        <div id="ann-content" class="content active">
            <h2 style="color: var(--gold)">BROADCAST TERMINAL</h2>
            <label>Trainer User ID</label><input type="text" id="ann-uid">
            <label>Timezone</label><input type="text" id="ann-tz">
            <label>Local Time</label><input type="text" id="ann-time" placeholder="e.g. 7:00 PM">
            <label>Location</label><input type="text" id="ann-loc">
            <label>Additional Info</label><textarea id="ann-info"></textarea>
            <br><br>
            <button onclick="postAnnouncement()" style="background: var(--neon-blue); color: black; padding: 15px; border: none; width: 100%; font-weight: bold; cursor: pointer;">SEND TO DISCORD</button>
        </div>

        <div id="res-content" class="content">
            <h2 style="color: var(--gold)">MULTI-TRAINEE COMPILER (MAX 5)</h2>
            <div style="display: flex; gap: 15px;">
                <div style="flex:1"><label>Host Roblox Username</label><input type="text" id="h-rblx"></div>
                <div style="flex:1"><label>Host Discord ID</label><input type="text" id="h-id"></div>
            </div>

            <div class="trainee-entry" style="margin-top: 25px;">
                <h4 style="color: var(--neon-pink); margin: 0 0 10px 0;">TRAINEE DATA</h4>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="t-rblx" placeholder="Roblox Username">
                    <input type="text" id="t-id" placeholder="Discord User ID">
                </div>
                <label>Knowledge Score (0-10)</label><input type="number" id="t-know" max="10">
                <label>Knowledge Notes</label><textarea id="t-know-notes"></textarea>

                <label>Mod-Call Section</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div><span>Proper SPAG?</span> <div class="toggle-group"><button class="t-btn" id="s-y" onclick="setTog('spag',true)">YES</button><button class="t-btn" id="s-n" onclick="setTog('spag',false)">NO</button></div></div>
                    <div><span>Healed Host?</span> <div class="toggle-group"><button class="t-btn" id="h-y" onclick="setTog('heal',true)">YES</button><button class="t-btn" id="h-n" onclick="setTog('heal',false)">NO</button></div></div>
                    <div><span>Punished Correct?</span> <div class="toggle-group"><button class="t-btn" id="p-y" onclick="setTog('punish',true)">YES</button><button class="t-btn" id="p-n" onclick="setTog('punish',false)">NO</button></div></div>
                    <div><span>Evidence Used?</span> <div class="toggle-group"><button class="t-btn" id="e-y" onclick="setTog('evid',true)">YES</button><button class="t-btn" id="e-n" onclick="setTog('evid',false)">NO</button></div></div>
                </div>
                <label>Mod-Call Notes</label><textarea id="t-mod-notes"></textarea>

                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button onclick="saveTrainee(false)" style="flex:1; background: var(--neon-blue); border:none; padding:10px; font-weight:bold;">ADD TRAINEE</button>
                    <button onclick="saveTrainee(true)" style="flex:1; background: var(--neon-pink); border:none; padding:10px; color:white; font-weight:bold;">DISQUALIFY</button>
                </div>
            </div>

            <div id="batch-summary"></div>
            <button id="publish-btn" onclick="sendAllResults()">PUBLISH BATCH RESULTS</button>
        </div>
    </div>

    <script>
        let batch = [];
        let curTogs = { spag: null, heal: null, punish: null, evid: null };

        function unlockTerminal() {
            if(document.getElementById('pass-field').value === CONFIG.ACCESS_KEY) {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
            } else { alert("INVALID ACCESS KEY"); }
        }

        function switchTab(type) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(type + '-content').classList.add('active');
            document.getElementById('tab-' + type).classList.add('active');
        }

        function setTog(key, val) {
            curTogs[key] = val;
            const prefix = key.charAt(0);
            document.getElementById(prefix + '-y').className = val ? 't-btn yes-active' : 't-btn';
            document.getElementById(prefix + '-n').className = !val ? 't-btn no-active' : 't-btn';
        }

        function saveTrainee(isDQ) {
            if(batch.length >= 5) return alert("Batch full (5 Trainees max)");
            let dqReason = isDQ ? prompt("Enter DQ Reason:") : "";
            if(isDQ && !dqReason) return;

            const knowVal = parseInt(document.getElementById('t-know').value) || 0;
            const modVal = Object.values(curTogs).filter(v => v === true).length * 2.5;
            const total = knowVal + modVal;

            batch.push({
                rblx: document.getElementById('t-rblx').value,
                id: document.getElementById('t-id').value,
                score: total,
                status: isDQ ? "DQ" : (total >= 14 ? "PASS" : "FAIL"),
                reason: dqReason,
                knowNotes: document.getElementById('t-know-notes').value,
                modNotes: document.getElementById('t-mod-notes').value,
                raw: {...curTogs}
            });

            renderBatch();
            resetEntry();
        }

        function renderBatch() {
            const out = document.getElementById('batch-summary');
            out.innerHTML = "<h4>BATCH READY:</h4>";
            batch.forEach((t, i) => {
                out.innerHTML += `<div class="summary-card">${i+1}. ${t.rblx} | ${t.score}/20 | [${t.status}]</div>`;
            });
        }

        function resetEntry() {
            ['t-rblx', 't-id', 't-know', 't-know-notes', 't-mod-notes'].forEach(id => document.getElementById(id).value = "");
            curTogs = { spag: null, heal: null, punish: null, evid: null };
            document.querySelectorAll('.t-btn').forEach(b => b.className = 't-btn');
        }

        async function postAnnouncement() {
            const payload = {
                content: `<@${document.getElementById('ann-uid').value}> <@&${CONFIG.ANNOUNCE_ROLE_ID}>`,
                embeds: [{
                    title: "⚔️ HIGH ROCK BORDER TRAINING",
                    color: 16711935,
                    fields: [
                        { name: "Time", value: `${document.getElementById('ann-time').value} ${document.getElementById('ann-tz').value}` },
                        { name: "Location", value: document.getElementById('ann-loc').value },
                        { name: "Notes", value: document.getElementById('ann-info').value || "None" }
                    ],
                    footer: { text: "High Rock Military Command" }
                }]
            };
            await fetch(CONFIG.WEBHOOK_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });
            alert("ANNOUNCEMENT BROADCASTED");
        }

        async function sendAllResults() {
            if(batch.length === 0) return alert("No trainees added!");
            const hId = document.getElementById('h-id').value;
            let pings = `<@${hId}> `;
            batch.forEach(t => pings += `<@${t.id}> `);

            const embeds = batch.map(t => ({
                title: `TRAINING EVALUATION: ${t.status}`,
                color: t.status === "PASS" ? 65280 : 16711680,
                fields: [
                    { name: "Host", value: document.getElementById('h-rblx').value + ` (${hId})`, inline: true },
                    { name: "Candidate", value: t.rblx + ` (${t.id})`, inline: true },
                    { name: "Total Score", value: `${t.score}/20`, inline: true },
                    { name: "Evaluation", value: `Knowledge: ${t.knowNotes || "None"}\nMod-Call: ${t.modNotes || "None"}` },
                    ...(t.reason ? [{ name: "DQ Reason", value: t.reason }] : [])
                ]
            }));

            await fetch(CONFIG.WEBHOOK_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: pings, embeds: embeds }) });
            alert("RESULTS PUBLISHED. RELOADING...");
            location.reload();
        }
    </script>
</body>
</html>
