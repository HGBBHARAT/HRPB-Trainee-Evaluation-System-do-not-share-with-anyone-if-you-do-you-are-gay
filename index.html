<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRBRP | Training Asssit</title>
    <script>
        /* --- CONFIGURATION START --- */
        const CONFIG = {
            WEBHOOK_URL: "https://discord.com/api/webhooks/1452656413481636054/k1pmvQg7-qFWBJi6ESho0m3dzGu3v8OtgMIZWs7DFIxqL2CZHDAotzM0io2FTNXkEWum",
            ANNOUNCE_ROLE_ID: "1452651642850775082",
            ACCESS_KEY: "HRMC-X9-7721-OMEGA"
        };
        /* --- CONFIGURATION END --- */
    </script>
    <style>
        :root {
            --bg-deep: #02050f;
            --bg-panel: #0a132d;
            --neon-pink: #ff00ff;
            --neon-blue: #00f2ff;
            --gold: #d4af37;
            --text: #e0e0e0;
            --fail: #ff0000;
            --pass: #00ff00;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #login-screen {
            background: var(--bg-panel);
            padding: 40px;
            border: 2px solid var(--neon-pink);
            box-shadow: 0 0 20px var(--neon-pink);
            text-align: center;
        }

        .login-input {
            background: #000;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 12px;
            width: 250px;
            text-align: center;
            margin-bottom: 20px;
        }

        #dashboard {
            display: none;
            width: 95%;
            max-width: 1000px;
            background: var(--bg-panel);
            border: 2px solid var(--neon-blue);
        }

        .tabs { display: flex; border-bottom: 2px solid var(--neon-pink); }
        .tab {
            flex: 1; padding: 20px; text-align: center; cursor: pointer;
            color: var(--gold); font-weight: bold; text-transform: uppercase;
        }
        .tab.active { background: rgba(255, 0, 255, 0.15); text-shadow: 0 0 8px var(--neon-pink); }

        .content { padding: 30px; display: none; }
        .content.active { display: block; }

        input, textarea {
            background: #02050f; border: 1px solid var(--neon-blue);
            color: white; padding: 10px; width: 100%; box-sizing: border-box; margin-top: 8px;
        }

        .toggle-group { display: flex; gap: 5px; margin: 10px 0; }
        .t-btn {
            padding: 10px; cursor: pointer; border: 1px solid var(--neon-pink);
            background: transparent; color: white; flex: 1; text-align: center; font-weight: bold;
        }
        .t-btn.yes-active { background: var(--pass); color: #000; border-color: var(--pass); }
        .t-btn.no-active { background: var(--fail); color: #fff; border-color: var(--fail); }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 242, 255, 0.05);
            border: 1px solid var(--neon-blue);
            padding: 15px;
            margin: 10px 0;
        }

        .status-badge { font-weight: bold; padding: 4px 10px; border-radius: 3px; text-transform: uppercase; }
        .remove-btn { background: var(--fail); color: white; border: none; padding: 5px 15px; cursor: pointer; font-weight: bold; }

        #publish-btn {
            background: var(--bg-deep); color: var(--neon-blue);
            border: 2px solid var(--neon-blue); width: 100%; padding: 20px;
            font-size: 1.5rem; cursor: pointer; font-weight: bold; margin-top: 20px;
        }
        #publish-btn:hover { background: var(--neon-blue); color: black; box-shadow: 0 0 20px var(--neon-blue); }
        
        .full-width-btn {
            width: 100%;
            background: var(--neon-pink);
            border: none;
            padding: 12px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color: var(--gold);">HIGH ROCK BORDER ROLEPLAY</h1>
        <input type="password" id="pass-field" class="login-input" placeholder="ACCESS KEY">
        <br>
        <button onclick="unlock()" style="background: var(--neon-pink); color: white; padding: 12px 40px; border: none; font-weight: bold; cursor: pointer;">DECRYPT</button>
    </div>

    <div id="dashboard">
        <div class="tabs">
            <div class="tab active" id="tab-ann" onclick="switchTab('ann')">Announcements</div>
            <div class="tab" id="tab-res" onclick="switchTab('res')">Training Results</div>
        </div>

        <div id="ann-content" class="content active">
            <h2 style="color: var(--gold)">ANNOUNCEMENT TERMINAL</h2>
            <label>Trainer User ID</label><input type="text" id="ann-uid">
            <label>Timezone</label><input type="text" id="ann-tz">
            <label>Local Time</label><input type="text" id="ann-time">
            <label>Location</label><input type="text" id="ann-loc">
            <label>Additional Info</label><textarea id="ann-info"></textarea>
            <br><br>
            <button onclick="postAnn()" style="background: var(--neon-blue); color: black; padding: 15px; border: none; width: 100%; font-weight: bold; cursor: pointer;">BROADCAST</button>
        </div>

        <div id="res-content" class="content">
            <h2 style="color: var(--gold)">RESULT BATCHER</h2>
            <div style="display: flex; gap: 15px;">
                <div style="flex:1"><label>Host Roblox</label><input type="text" id="h-rblx"></div>
                <div style="flex:1"><label>Host Discord ID</label><input type="text" id="h-id"></div>
            </div>

            <div style="border: 1px dashed var(--neon-pink); padding: 15px; margin-top: 25px;">
                <h3 style="color: var(--neon-pink); margin:0;">TRAINEE INPUT</h3>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="t-rblx" placeholder="Roblox Username">
                    <input type="text" id="t-id" placeholder="Discord User ID">
                </div>
                <label>Knowledge Score (0-10)</label><input type="number" id="t-know" max="10">
                <label>Knowledge Notes</label><textarea id="t-know-notes"></textarea>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top:15px;">
                    <div>SPAG? <div class="toggle-group"><button class="t-btn" id="s-y" onclick="setTog('spag',true)">YES</button><button class="t-btn" id="s-n" onclick="setTog('spag',false)">NO</button></div></div>
                    <div>Healed Host? <div class="toggle-group"><button class="t-btn" id="h-y" onclick="setTog('heal',true)">YES</button><button class="t-btn" id="h-n" onclick="setTog('heal',false)">NO</button></div></div>
                    <div>Punished Correct? <div class="toggle-group"><button class="t-btn" id="p-y" onclick="setTog('punish',true)">YES</button><button class="t-btn" id="p-n" onclick="setTog('punish',false)">NO</button></div></div>
                    <div>Evidence Used? <div class="toggle-group"><button class="t-btn" id="e-y" onclick="setTog('evid',true)">YES</button><button class="t-btn" id="e-n" onclick="setTog('evid',false)">NO</button></div></div>
                </div>
                <label>Mod-Call Notes</label><textarea id="t-mod-notes"></textarea>

                <div style="margin-top: 15px;">
                    <button onclick="save(true)" class="full-width-btn">DISQUALIFY TRAINEE</button>
                </div>
            </div>

            <div id="batch-list"></div>
            <button id="publish-btn" onclick="publish()">PUBLISH RESULTS</button>
        </div>
    </div>

    <script>
        let batch = [];
        let toggles = { spag: null, heal: null, punish: null, evid: null };

        function unlock() {
            if(document.getElementById('pass-field').value === CONFIG.ACCESS_KEY) {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
            } else { alert("ACCESS DENIED"); }
        }

        function switchTab(t) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(t + '-content').classList.add('active');
            document.getElementById('tab-' + t).classList.add('active');
        }

        function setTog(k, v) {
            toggles[k] = v;
            const p = k.charAt(0);
            document.getElementById(p + '-y').className = v ? 't-btn yes-active' : 't-btn';
            document.getElementById(p + '-n').className = !v ? 't-btn no-active' : 't-btn';
        }

        function save(dq) {
            if(batch.length >= 5) return alert("Max 5 trainees.");
            let reason = dq ? prompt("DQ Reason:") : "";
            if(dq && !reason) return;

            const know = parseInt(document.getElementById('t-know').value) || 0;
            const mod = Object.values(toggles).filter(v => v === true).length * 2.5;
            const total = know + mod;
            const stat = dq ? "DQ" : (total >= 14 ? "PASS" : "FAIL");

            batch.push({
                rblx: document.getElementById('t-rblx').value,
                id: document.getElementById('t-id').value,
                score: total,
                status: stat,
                reason: reason,
                knowNotes: document.getElementById('t-know-notes').value,
                modNotes: document.getElementById('t-mod-notes').value
            });
            render();
            clear();
        }

        function render() {
            const out = document.getElementById('batch-list');
            out.innerHTML = "<h3>CURRENT BATCH:</h3>";
            batch.forEach((t, i) => {
                const color = t.status === "PASS" ? "var(--pass)" : "var(--fail)";
                out.innerHTML += `
                <div class="summary-item">
                    <div>
                        <strong>${t.rblx}</strong> (${t.id}) <br>
                        Score: ${t.score}/20 | <span class="status-badge" style="color:${color}">${t.status}</span>
                    </div>
                    <button class="remove-btn" onclick="remove(${i})">REMOVE</button>
                </div>`;
            });
        }

        function remove(index) {
            batch.splice(index, 1);
            render();
        }

        function clear() {
            ['t-rblx', 't-id', 't-know', 't-know-notes', 't-mod-notes'].forEach(id => document.getElementById(id).value = "");
            toggles = { spag: null, heal: null, punish: null, evid: null };
            document.querySelectorAll('.t-btn').forEach(b => b.className = 't-btn');
        }

        async function postAnn() {
            const body = {
                content: `<@${document.getElementById('ann-uid').value}> <@&${CONFIG.ANNOUNCE_ROLE_ID}>`,
                embeds: [{
                    title: "⚔️ HIGH ROCK TRAINING",
                    color: 16711935,
                    fields: [
                        { name: "Time", value: `${document.getElementById('ann-time').value} ${document.getElementById('ann-tz').value}` },
                        { name: "Location", value: document.getElementById('ann-loc').value },
                        { name: "Notes", value: document.getElementById('ann-info').value || "None" }
                    ]
                }]
            };
            await fetch(CONFIG.WEBHOOK_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(body) });
            alert("Broadcast sent.");
        }

        async function publish() {
            if(batch.length === 0) return alert("No data.");
            const hId = document.getElementById('h-id').value;
            let pings = `<@${hId}> `;
            batch.forEach(t => pings += `<@${t.id}> `);

            const embeds = batch.map(t => ({
                title: `EVALUATION: ${t.status}`,
                color: t.status === "PASS" ? 65280 : 16711680,
                fields: [
                    { name: "Host", value: document.getElementById('h-rblx').value + ` (${hId})`, inline: true },
                    { name: "Candidate", value: t.rblx + ` (${t.id})`, inline: true },
                    { name: "Score", value: `${t.score}/20`, inline: true },
                    { name: "Notes", value: `K: ${t.knowNotes}\nM: ${t.modNotes}` },
                    ...(t.reason ? [{ name: "DQ", value: t.reason }] : [])
                ]
            }));

            await fetch(CONFIG.WEBHOOK_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: pings, embeds: embeds }) });
            alert("Results published.");
            location.reload();
        }
    </script>
</body>
</html>
